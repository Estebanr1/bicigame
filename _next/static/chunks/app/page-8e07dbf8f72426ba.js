(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9732:function(e,a,s){Promise.resolve().then(s.bind(s,5892))},5892:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return A}});var t=s(7437),n=s(2265),r=s(5293),i=s(535),l=s(1994),c=s(3335);function o(){for(var e=arguments.length,a=Array(e),s=0;s<e;s++)a[s]=arguments[s];return(0,c.m6)((0,l.W)(a))}let d=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=n.forwardRef((e,a)=>{let{className:s,variant:n,size:i,asChild:l=!1,...c}=e,u=l?r.g7:"button";return(0,t.jsx)(u,{className:o(d({variant:n,size:i,className:s})),ref:a,...c})});u.displayName="Button";let x=n.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)("div",{ref:a,className:o("rounded-lg border bg-card text-card-foreground shadow-sm",s),...n})});x.displayName="Card";let m=n.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)("div",{ref:a,className:o("flex flex-col space-y-1.5 p-6",s),...n})});m.displayName="CardHeader";let N=n.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)("div",{ref:a,className:o("text-2xl font-semibold leading-none tracking-tight",s),...n})});N.displayName="CardTitle",n.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)("div",{ref:a,className:o("text-sm text-muted-foreground",s),...n})}).displayName="CardDescription";let h=n.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)("div",{ref:a,className:o("p-6 pt-0",s),...n})});h.displayName="CardContent",n.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)("div",{ref:a,className:o("flex items-center p-6 pt-0",s),...n})}).displayName="CardFooter";let v=(0,i.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function g(e){let{className:a,variant:s,...n}=e;return(0,t.jsx)("div",{className:o(v({variant:s}),a),...n})}var p=s(814);let b=n.forwardRef((e,a)=>{let{className:s,value:n,...r}=e;return(0,t.jsx)(p.fC,{ref:a,className:o("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...r,children:(0,t.jsx)(p.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(n||0),"%)")}})})});b.displayName=p.fC.displayName;let j=(0,i.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),f=n.forwardRef((e,a)=>{let{className:s,variant:n,...r}=e;return(0,t.jsx)("div",{ref:a,role:"alert",className:o(j({variant:n}),s),...r})});f.displayName="Alert",n.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)("h5",{ref:a,className:o("mb-1 font-medium leading-none tracking-tight",s),...n})}).displayName="AlertTitle";let D=n.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)("div",{ref:a,className:o("text-sm [&_p]:leading-relaxed",s),...n})});function A(){let[e,a]=(0,n.useState)("inicio"),[s,r]=(0,n.useState)({nodemcuDetectado:!1,jugador:1,velocidad:0,distancia:0,velocidadMedia:0,distanciaFinal:0,distanciaRival:0,rivalVelocidad:0,gameActive:!1,connectionMethod:null,isMultiplayer:!1,clickCount:0,lastSensorTime:0,totalClicks:0}),[i,l]=(0,n.useState)(60),[c,o]=(0,n.useState)("\uD83D\uDE80 VERSI\xd3N 11 FINAL - Verificando compatibilidad..."),[d,v]=(0,n.useState)(!1),[p,j]=(0,n.useState)(!1),[A,I]=(0,n.useState)(!1),[F,L]=(0,n.useState)(!1),[V,y]=(0,n.useState)(!1),[C,S]=(0,n.useState)(""),[E,M]=(0,n.useState)([]),[w,k]=(0,n.useState)([]),[T,R]=(0,n.useState)(!1),[P,U]=(0,n.useState)("Esperando..."),[O,W]=(0,n.useState)(""),H=(0,n.useRef)(null),z=(0,n.useRef)(null),_=(0,n.useRef)(null),B=(0,n.useRef)(null),G=(0,n.useRef)(null),q=(0,n.useRef)(null),J=e=>{let a=new Date().toLocaleTimeString();k(s=>[...s.slice(-4),"".concat(a,": ").concat(e)])};(0,n.useEffect)(()=>{K(),J("\uD83D\uDE80 INICIANDO VERSI\xd3N 11 FINAL - SIN BLOQUEOS"),console.log("\uD83D\uDE80 BIKE RACE GAME VERSI\xd3N 11 FINAL CARGADA")},[]),(0,n.useEffect)(()=>(s.gameActive&&s.velocidad>0&&(G.current=setTimeout(()=>{r(e=>({...e,velocidad:Math.max(0,.95*e.velocidad)}))},1e3)),()=>{G.current&&clearTimeout(G.current)}),[s.velocidad,s.gameActive]);let K=async()=>{try{if(!("serial"in navigator)){L(!1),o("❌ Web Serial API no disponible. Usa Chrome/Edge en una ventana normal."),J("Web Serial API no disponible - V11 FINAL");return}if(window.self!==window.top){y(!0),o("⚠️ Web Serial API bloqueada en iframe. Abre la aplicaci\xf3n en una ventana nueva."),J("Detectado iframe - permisos restringidos - V11 FINAL");return}L(!0),o("✅ Web Serial API disponible. Listo para conectar NodeMCU V11 FINAL."),J("Web Serial API disponible - V11 FINAL lista")}catch(e){console.error("Error verificando soporte V11 FINAL:",e),y(!0),o("❌ Error verificando compatibilidad. Usa modo alternativo."),J("Error V11 FINAL: ".concat(e))}},Q=e=>e<200?50:e<500?35:e<1e3?25:e<2e3?15:10,X=async()=>{if(!F||V){o("⚠️ Web Serial API no disponible. Usando modo simulado V11 FINAL."),J("Fallback a modo simulado V11 FINAL"),es();return}I(!0),o("\uD83D\uDD0C Selecciona el puerto del NodeMCU en el di\xe1logo... (V11 FINAL)"),J("Solicitando puerto serie V11 FINAL...");try{let e=await navigator.serial.requestPort();J("Puerto seleccionado V11 FINAL, abriendo conexi\xf3n..."),await e.open({baudRate:115200,dataBits:8,stopBits:1,parity:"none",flowControl:"none"}),J("✅ Puerto abierto exitosamente V11 FINAL"),_.current=e,v(!0),r(e=>({...e,nodemcuDetectado:!0,connectionMethod:"usb"})),I(!1),o("\uD83C\uDF89 \xa1NodeMCU V11 FINAL conectado! Configurando comunicaci\xf3n...");let s=new TextEncoderStream;s.readable.pipeTo(e.writable);let t=s.writable.getWriter();B.current=t,$(e),setTimeout(async()=>{try{await t.write("INIT\n"),J("Comando INIT V11 FINAL enviado"),o("\uD83D\uDE80 \xa1NodeMCU V11 FINAL listo! Esperando datos del sensor..."),U("Sensor V11 FINAL listo")}catch(e){J("Error enviando INIT V11 FINAL")}},1e3),setTimeout(()=>{a("seleccionModo")},3e3)}catch(e){console.error("Error conectando V11 FINAL:",e),J("Error V11 FINAL: ".concat(e.message)),"NotFoundError"===e.name?o("❌ No se seleccion\xf3 ning\xfan dispositivo V11 FINAL."):(o("❌ Error de conexi\xf3n V11 FINAL. Usando modo simulado."),setTimeout(()=>{es()},2e3)),I(!1)}},$=e=>{J("\uD83D\uDD0D Iniciando lectura peri\xf3dica V11 FINAL..."),U("Escuchando sensor V11 FINAL...");let a="",s=async()=>{try{if(!e.readable)return;let s=e.readable.getReader(),t=new TextDecoder;try{let{value:e,done:n}=await Promise.race([s.read(),new Promise((e,a)=>setTimeout(()=>a(Error("timeout")),100))]);if(n){J("Lectura V11 FINAL terminada");return}if(e){let s=t.decode(e,{stream:!0}),n=(a+=s).split(/[\r\n]+/);for(let e of(a=n.pop()||"",n)){let a=e.trim();a&&Y(a)}}}finally{s.releaseLock()}}catch(e){"timeout"!==e.message&&(console.error("Error leyendo V11 FINAL:",e),J("Error leyendo V11 FINAL: ".concat(e.message)))}};q.current=setInterval(s,200)},Y=e=>{M(a=>[...a.slice(-9),e]),S(e),J('\uD83D\uDCE1 V11 FINAL Recibido: "'.concat(e,'"'));let a=e.toLowerCase();"click"===a||"sensor_activated"===a||"1"===e?(J("\uD83D\uDEB4‍♂️ \xa1SENSOR F\xcdSICO V11 FINAL ACTIVADO!"),U("\xa1Sensor V11 FINAL activado!"),W(new Date().toLocaleTimeString()),R(!0),setTimeout(()=>{R(!1),U("Esperando sensor V11 FINAL...")},300),Z()):a.includes("listo")||a.includes("ready")||a.includes("inicializado")?(J("✅ NodeMCU V11 FINAL inicializado correctamente"),o("\uD83C\uDF89 \xa1NodeMCU V11 FINAL listo! Sensor HW-511 funcionando."),U("Sensor V11 FINAL listo")):a.includes("led_on")?(R(!0),J("\uD83D\uDCA1 LED V11 FINAL encendido")):a.includes("led_off")?(R(!1),J("\uD83D\uDCA1 LED V11 FINAL apagado")):(a.includes("prueba")||a.includes("test"))&&J("\uD83E\uDDEA Comando de prueba V11 FINAL recibido por NodeMCU")},Z=()=>{let e=Date.now(),a=e-s.lastSensorTime;J("⚡ V11 FINAL PROCESANDO CLICK - Intervalo: ".concat(a,"ms")),j(!0),setTimeout(()=>j(!1),500),r(s=>{let t=s.totalClicks+1,n=s.velocidad,r=s.distancia,i=s.clickCount;if(s.gameActive){let e=3+(n=Q(a))/8;r=s.distancia+e,i=s.clickCount+1,J("\uD83C\uDFC3‍♂️ V11 FINAL JUEGO ACTIVO - Velocidad: ".concat(Math.round(n),"km/h | Distancia: +").concat(Math.round(e),"m | Total: ").concat(Math.round(r),"m"))}else J("\uD83D\uDCCA V11 FINAL Click registrado (juego no activo) - Total clicks: ".concat(t));return{...s,velocidad:n,distancia:r,clickCount:i,totalClicks:t,lastSensorTime:e}})},ee=async()=>{if(B.current)try{await B.current.write("TEST_SENSOR\n"),J("\uD83E\uDDEA V11 FINAL Comando de prueba del sensor enviado"),U("Enviando prueba V11 FINAL...")}catch(e){J("❌ V11 FINAL Error enviando comando de prueba")}},ea=async()=>{if(B.current)try{await B.current.write("STATUS\n"),J("\uD83D\uDCCA V11 FINAL Solicitando estado del sensor")}catch(e){J("❌ V11 FINAL Error solicitando estado")}},es=()=>{o("\uD83C\uDFAE Modo simulado V11 FINAL activado - Sensor virtual conectado"),v(!0),r(e=>({...e,nodemcuDetectado:!0,connectionMethod:"simulated"})),J("Modo simulado V11 FINAL iniciado"),setTimeout(()=>{a("seleccionModo")},1500)},et=async()=>{try{q.current&&(clearInterval(q.current),J("V11 FINAL Interval de lectura detenido")),B.current&&(await B.current.close(),J("V11 FINAL Writer cerrado")),_.current&&(await _.current.close(),J("V11 FINAL Puerto serie cerrado")),v(!1),o("\uD83D\uDD0C NodeMCU V11 FINAL desconectado"),r(e=>({...e,nodemcuDetectado:!1})),M([]),S(""),R(!1),U("V11 FINAL Desconectado")}catch(e){console.error("Error desconectando V11 FINAL:",e),J("V11 FINAL Error desconectando: ".concat(e))}},en=e=>{r(a=>({...a,gameActive:!0,isMultiplayer:e,velocidad:0,distancia:0,distanciaRival:0,clickCount:0,lastSensorTime:Date.now()})),l(60),a(e?"juegoMultijugador":"juegoUnJugador"),J("\uD83C\uDFAE V11 FINAL JUEGO INICIADO - Modo: ".concat(e?"Multijugador":"Individual")),J("\uD83D\uDD25 V11 FINAL \xa1Activa el sensor f\xedsico para hacer avanzar la bici!"),H.current=setInterval(()=>{l(e=>e<=1?(er(),0):e-1)},1e3),e&&(z.current=setInterval(()=>{r(e=>{let a=40*Math.random();return{...e,rivalVelocidad:a,distanciaRival:e.distanciaRival+a/3.6}})},1e3))},er=()=>{r(e=>({...e,gameActive:!1})),H.current&&clearInterval(H.current),z.current&&clearInterval(z.current),J("\uD83C\uDFC1 V11 FINAL Juego terminado"),r(e=>({...e,distanciaFinal:Math.round(e.distancia),velocidadMedia:e.clickCount>0?Math.round(e.distancia/60*3.6):0})),a("resultados")},ei=()=>{J("\uD83D\uDC46 V11 FINAL Click manual procesado"),Z()};return(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-green-50 p-4",children:(0,t.jsxs)("div",{className:"container mx-auto py-8",children:["inicio"===e&&(0,t.jsxs)("div",{className:"max-w-2xl mx-auto text-center space-y-8",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold text-gray-800 flex items-center justify-center gap-3",children:"\uD83D\uDEB4‍♂️ Bike Race Sensor Game V11 FINAL"}),(0,t.jsx)("p",{className:"text-lg text-gray-600",children:"Conect\xe1 tu NodeMCU con sensor infrarrojo HW-511 (pin D2) para comenzar."}),(0,t.jsx)(g,{variant:"outline",className:"text-xs bg-green-100 border-green-300",children:"✅ VERSI\xd3N 11 FINAL - Sin bloqueos - Lectura peri\xf3dica optimizada"}),(0,t.jsxs)("div",{className:"text-xs text-green-600 font-mono",children:["ID: bike-race-sensor-game-v11-final | Build: ",new Date().toISOString()]})]}),V&&(0,t.jsx)(f,{children:(0,t.jsxs)(D,{className:"space-y-2",children:[(0,t.jsx)("p",{children:"⚠️ Web Serial API bloqueada en este entorno."}),(0,t.jsx)(u,{onClick:()=>{let e=window.open(window.location.href,"_blank","width=1200,height=800");e&&e.focus()},variant:"outline",size:"sm",children:"\uD83D\uDD17 Abrir en ventana nueva"})]})}),(0,t.jsx)(x,{children:(0,t.jsxs)(h,{className:"p-6 space-y-6",children:[(0,t.jsx)("div",{className:"p-4 rounded-lg border ".concat(d?"bg-green-50 border-green-200":V?"bg-orange-50 border-orange-200":F?"bg-blue-50 border-blue-200":"bg-red-50 border-red-200"),children:(0,t.jsx)("div",{className:A?"animate-pulse":"",children:(0,t.jsxs)("span",{className:"".concat(d?"text-green-800":V?"text-orange-800":F?"text-blue-800":"text-red-800"),children:[d?"✅":V?"⚠️":F?"\uD83D\uDD0C":"❌"," ",c]})})}),d&&"usb"===s.connectionMethod&&(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)("div",{className:"p-3 rounded-lg border ".concat(P.includes("activado")?"bg-green-100 border-green-300":"bg-blue-100 border-blue-300"),children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl mb-1",children:"\uD83D\uDD0D"}),(0,t.jsx)("div",{className:"text-sm font-medium",children:"Estado Sensor V11 FINAL"}),(0,t.jsx)("div",{className:"text-xs",children:P})]})}),(0,t.jsx)("div",{className:"p-3 rounded-lg border ".concat(T?"bg-green-100 border-green-300":"bg-gray-100 border-gray-300"),children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-4 h-4 rounded-full mx-auto mb-1 ".concat(T?"bg-green-500 animate-pulse":"bg-gray-400")}),(0,t.jsx)("div",{className:"text-sm font-medium",children:"LED NodeMCU V11 FINAL"}),(0,t.jsx)("div",{className:"text-xs",children:T?"\uD83D\uDFE2 ON":"⚫ OFF"})]})})]}),s.totalClicks>0&&(0,t.jsx)("div",{className:"p-4 bg-blue-100 rounded-lg",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-3xl font-bold text-blue-800 mb-1",children:s.totalClicks}),(0,t.jsx)("div",{className:"text-sm text-blue-600",children:"Total Clicks Detectados V11 FINAL"}),O&&(0,t.jsxs)("div",{className:"text-xs text-blue-500",children:["\xdaltimo: ",O]})]})}),C&&(0,t.jsxs)("div",{className:"p-3 bg-gray-100 rounded-lg",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"\xdaltimo dato del sensor V11 FINAL:"}),(0,t.jsx)("code",{className:"text-sm font-mono font-bold ".concat("click"===C.toLowerCase()?"text-green-600 animate-pulse":"text-gray-600"),children:C})]}),E.length>0&&(0,t.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg max-h-32 overflow-y-auto",children:[(0,t.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"Datos serie V11 FINAL recibidos:"}),E.map((e,a)=>(0,t.jsxs)("div",{className:"text-xs font-mono",children:[(0,t.jsxs)("span",{className:"text-gray-400",children:[a+1,":"]})," ",(0,t.jsx)("span",{className:"click"===e.toLowerCase()?"text-green-600 font-bold":"text-gray-600",children:e})]},a))]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)(u,{onClick:X,className:"w-full",disabled:A||d,children:["\uD83D\uDD0C"," ",A?"Conectando V11 FINAL...":d?"NodeMCU V11 FINAL Conectado":"Conectar NodeMCU V11 FINAL por USB"]}),d&&"usb"===s.connectionMethod&&(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,t.jsx)(u,{onClick:ee,variant:"outline",size:"sm",children:"\uD83E\uDDEA Probar V11 FINAL"}),(0,t.jsx)(u,{onClick:ea,variant:"outline",size:"sm",children:"\uD83D\uDCCA Estado V11 FINAL"}),(0,t.jsx)(u,{onClick:et,variant:"outline",size:"sm",children:"\uD83D\uDD0C Desconectar V11 FINAL"})]})]}),w.length>0&&(0,t.jsxs)("div",{className:"p-3 bg-blue-50 rounded-lg max-h-40 overflow-y-auto",children:[(0,t.jsx)("p",{className:"text-xs text-blue-600 mb-2",children:"Log de conexi\xf3n V11 FINAL:"}),w.map((e,a)=>(0,t.jsx)("div",{className:"text-xs text-blue-800 mb-1",children:e},a))]}),(0,t.jsxs)("div",{className:"text-sm text-gray-500 space-y-2",children:[(0,t.jsx)("p",{children:(0,t.jsx)("strong",{children:"Estado Actual V11 FINAL:"})}),(0,t.jsxs)("ul",{className:"text-left space-y-1",children:[(0,t.jsxs)("li",{children:["• ✅ Conexi\xf3n: ",d?"OK - Lectura peri\xf3dica V11 FINAL activa":"No conectado"]}),(0,t.jsxs)("li",{children:["• ✅ Env\xedo de comandos: ",d?"Funciona (bot\xf3n Probar V11 FINAL)":"N/A"]}),(0,t.jsxs)("li",{children:['• \uD83D\uDD0D Recepci\xf3n de "click": ',s.totalClicks>0?"OK V11 FINAL":"Verificar sensor"]}),(0,t.jsx)("li",{children:'• \uD83D\uDCE1 Sensor HW-511 en D2: Debe enviar "click" al activarse'})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"font-semibold",children:"Modo de Prueba V11 FINAL"}),(0,t.jsx)(u,{variant:"outline",onClick:()=>{r(e=>({...e,nodemcuDetectado:!0,connectionMethod:"manual"})),o("Modo manual V11 FINAL activado"),v(!0),J("Modo manual V11 FINAL iniciado"),setTimeout(()=>a("seleccionModo"),1e3)},className:"w-full bg-transparent",children:"\uD83D\uDC46 Usar Modo Manual V11 FINAL (Sin Hardware)"})]})]})}),(0,t.jsxs)(x,{children:[(0,t.jsx)(m,{children:(0,t.jsx)(N,{className:"text-lg",children:"\uD83D\uDD27 C\xf3digo NodeMCU Ultra Simple V11 FINAL"})}),(0,t.jsxs)(h,{children:[(0,t.jsx)("div",{className:"bg-gray-900 text-green-400 p-4 rounded-lg text-sm font-mono overflow-x-auto",children:(0,t.jsx)("pre",{children:'// C\xf3digo NodeMCU ULTRA SIMPLE V11 FINAL - Sin bloqueos\nconst int sensorPin = D2;\nconst int ledPin = LED_BUILTIN;\n\nbool lastState = HIGH;\nunsigned long lastTime = 0;\n\nvoid setup() {\n  Serial.begin(115200);\n  pinMode(sensorPin, INPUT_PULLUP);\n  pinMode(ledPin, OUTPUT);\n  digitalWrite(ledPin, HIGH);\n  \n  delay(500);\n  Serial.println("Sistema V11 FINAL listo para detectar sensor");\n}\n\nvoid loop() {\n  bool currentState = digitalRead(sensorPin);\n  \n  // Detectar activaci\xf3n\n  if (currentState == LOW && lastState == HIGH) {\n    if (millis() - lastTime > 200) { // Debounce\n      Serial.println("click");\n      \n      // LED r\xe1pido\n      digitalWrite(ledPin, LOW);\n      delay(50);\n      digitalWrite(ledPin, HIGH);\n      \n      lastTime = millis();\n    }\n  }\n  \n  lastState = currentState;\n  \n  // Comandos simples\n  if (Serial.available()) {\n    String cmd = Serial.readStringUntil(\'\\n\');\n    cmd.trim();\n    \n    if (cmd == "TEST_SENSOR") {\n      Serial.println("click");\n      digitalWrite(ledPin, LOW);\n      delay(100);\n      digitalWrite(ledPin, HIGH);\n    }\n    else if (cmd == "STATUS") {\n      Serial.print("Sensor V11 FINAL: ");\n      Serial.println(digitalRead(sensorPin) ? "HIGH" : "LOW");\n    }\n  }\n  \n  delay(5); // Muy peque\xf1o delay V11 FINAL\n}'})}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"⚠️ IMPORTANTE: Este c\xf3digo V11 FINAL es ultra simple y no deber\xeda causar bloqueos"})]})]})]}),"seleccionModo"===e&&(0,t.jsxs)("div",{className:"max-w-2xl mx-auto text-center space-y-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Seleccion\xe1 el modo de juego V11 FINAL"}),(0,t.jsxs)("div",{className:"mb-4 space-y-2",children:[(0,t.jsxs)(g,{variant:"outline",className:"p-2 bg-green-100",children:["Conectado V11 FINAL via ","usb"===s.connectionMethod?"USB Real":"Modo Manual"]}),s.totalClicks>0&&(0,t.jsxs)("div",{className:"text-sm text-blue-600",children:["\uD83C\uDFAF Total clicks V11 FINAL detectados: ",s.totalClicks]}),"usb"===s.connectionMethod&&(0,t.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(T?"bg-green-500 animate-pulse":"bg-gray-400")}),(0,t.jsxs)("span",{className:"text-sm",children:["LED V11 FINAL: ",T?"ON":"OFF"]})]}),(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["Sensor V11 FINAL: ",P]})]})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-8",children:[(0,t.jsxs)(x,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>en(!1),children:[(0,t.jsxs)(m,{className:"text-center",children:[(0,t.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDC64"}),(0,t.jsx)(N,{children:"Jugador Individual V11 FINAL"})]}),(0,t.jsxs)(h,{className:"text-center space-y-4",children:[(0,t.jsx)("p",{className:"text-gray-600",children:"usb"===s.connectionMethod?"Activa el sensor HW-511 V11 FINAL para pedalear":"Haz clic V11 FINAL para pedalear"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Cada activaci\xf3n V11 FINAL suma 3+ metros"}),(0,t.jsx)(u,{className:"w-full",children:"Comenzar Solo V11 FINAL"})]})]}),(0,t.jsxs)(x,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>en(!0),children:[(0,t.jsxs)(m,{className:"text-center",children:[(0,t.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDC65"}),(0,t.jsx)(N,{children:"Multijugador V11 FINAL"})]}),(0,t.jsxs)(h,{className:"text-center space-y-4",children:[(0,t.jsx)("p",{className:"text-gray-600",children:"Compet\xed contra un rival IA V11 FINAL en tiempo real"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"\xa1Pedale\xe1 m\xe1s r\xe1pido V11 FINAL para ganar!"}),(0,t.jsx)(u,{className:"w-full",variant:"secondary",children:"Competir V11 FINAL"})]})]})]})]}),"juegoUnJugador"===e&&(0,t.jsxs)("div",{className:"max-w-4xl mx-auto space-y-8",children:[(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Modo Individual V11 FINAL"}),(0,t.jsx)("p",{className:"text-lg text-gray-600",children:"usb"===s.connectionMethod?"\xa1Activa el sensor HW-511 V11 FINAL f\xedsico para hacer circular la bici!":"\xa1Haz clic V11 FINAL para pedalear!"}),(0,t.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,t.jsx)(g,{variant:"outline",className:"bg-green-100",children:"usb"===s.connectionMethod?"Sensor HW-511 V11 FINAL Activo":"Modo Manual V11 FINAL"}),"usb"===s.connectionMethod&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(T?"bg-green-500 animate-pulse":"bg-gray-400")}),(0,t.jsxs)("span",{className:"text-xs",children:["LED V11 FINAL: ",T?"ON":"OFF"]})]})]})]}),(0,t.jsx)(x,{children:(0,t.jsxs)(h,{className:"p-8 space-y-8",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 text-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-4xl font-bold text-red-600 mb-2",children:i}),(0,t.jsx)("p",{className:"text-gray-600",children:"Segundos"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-4xl font-bold text-blue-600 mb-2",children:Math.round(s.velocidad)}),(0,t.jsx)("p",{className:"text-gray-600",children:"km/h"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-4xl font-bold text-green-600 mb-2",children:Math.round(s.distancia)}),(0,t.jsx)("p",{className:"text-gray-600",children:"metros"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-4xl font-bold text-purple-600 mb-2",children:s.clickCount}),(0,t.jsx)("p",{className:"text-gray-600",children:"Clicks V11 FINAL"})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(b,{value:Math.min(100,s.velocidad/50*100),className:"h-4"}),(0,t.jsxs)("p",{className:"text-center text-sm text-gray-600",children:["\uD83C\uDFAE JUEGO V11 FINAL ACTIVO - Activa el sensor f\xedsico para avanzar | Clicks: ",s.clickCount," | Total:"," ",s.totalClicks]})]}),(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsx)("div",{className:"inline-block text-8xl cursor-pointer select-none hover:scale-110 transition-transform ".concat(p?"animate-bounce scale-110":""),onClick:"manual"===s.connectionMethod?ei:void 0,style:{filter:p?"drop-shadow(0 0 20px #3b82f6)":"none",transform:p?"scale(1.1)":"scale(1)"},children:"\uD83D\uDEB4‍♂️"}),(0,t.jsx)("div",{className:"text-4xl ".concat(p?"animate-spin":""),children:"⚙️"}),(0,t.jsx)("p",{className:"text-gray-600",children:"usb"===s.connectionMethod?"\uD83D\uDD25 \xa1Activa el sensor infrarrojo HW-511 V11 FINAL en pin D2!":"Haz clic V11 FINAL en la bicicleta para pedalear"}),(0,t.jsx)("p",{className:"text-sm text-blue-600",children:"Cada activaci\xf3n V11 FINAL suma 3+ metros (m\xe1s bonus por velocidad)"}),"usb"===s.connectionMethod&&(0,t.jsxs)("div",{className:"mt-4 p-3 bg-blue-100 rounded text-sm",children:[(0,t.jsx)("strong",{children:"Estado del sensor V11 FINAL:"})," ",P,O&&(0,t.jsxs)("div",{className:"text-xs",children:["\xdaltimo click V11 FINAL: ",O]})]}),"usb"===s.connectionMethod&&(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsx)(u,{onClick:ee,variant:"outline",size:"sm",children:"\uD83E\uDDEA Probar Sensor V11 FINAL"}),(0,t.jsx)(u,{onClick:ea,variant:"outline",size:"sm",children:"\uD83D\uDCCA Estado Sensor V11 FINAL"})]})]})]})})]}),"juegoMultijugador"===e&&(0,t.jsxs)("div",{className:"max-w-6xl mx-auto space-y-8",children:[(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Modo Competencia V11 FINAL"}),(0,t.jsx)("p",{className:"text-lg text-gray-600",children:"usb"===s.connectionMethod?"\xa1Activa el sensor HW-511 V11 FINAL para ganar!":"\xa1Haz clic V11 FINAL para ganar!"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,t.jsxs)(x,{children:[(0,t.jsx)(m,{children:(0,t.jsx)(N,{className:"text-center text-blue-600",children:"Tu Progreso V11 FINAL (Derecha)"})}),(0,t.jsxs)(h,{className:"text-center space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"text-3xl font-bold text-blue-600",children:[Math.round(s.velocidad)," km/h"]}),(0,t.jsxs)("div",{className:"text-2xl font-semibold text-green-600",children:[Math.round(s.distancia)," m"]})]}),(0,t.jsx)("div",{className:"text-6xl ".concat(p?"animate-bounce":""),style:{filter:p?"drop-shadow(0 0 15px #3b82f6)":"none",transform:p?"scale(1.1)":"scale(1)"},children:"\uD83D\uDEB4‍♂️"}),(0,t.jsxs)(g,{variant:"outline",children:["Clicks V11 FINAL: ",s.clickCount]}),"usb"===s.connectionMethod&&(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(T?"bg-green-500 animate-pulse":"bg-gray-400")}),(0,t.jsxs)("span",{className:"text-xs",children:["LED V11 FINAL: ",T?"ON":"OFF"]})]})]})]}),(0,t.jsxs)(x,{children:[(0,t.jsx)(m,{children:(0,t.jsx)(N,{className:"text-center text-red-600",children:"Rival IA V11 FINAL (Izquierda)"})}),(0,t.jsxs)(h,{className:"text-center space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"text-3xl font-bold text-red-600",children:[Math.round(s.rivalVelocidad)," km/h"]}),(0,t.jsxs)("div",{className:"text-2xl font-semibold text-green-600",children:[Math.round(s.distanciaRival)," m"]})]}),(0,t.jsx)("div",{className:"text-6xl transform scale-x-[-1] ".concat(s.rivalVelocidad>10?"animate-bounce":""),children:"\uD83D\uDEB4‍♂️"}),(0,t.jsx)(g,{variant:"outline",children:"IA Inteligente V11 FINAL"})]})]})]}),(0,t.jsx)(x,{children:(0,t.jsxs)(h,{className:"p-8 space-y-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-5xl font-bold text-red-600 mb-2",children:i}),(0,t.jsx)("p",{className:"text-gray-600",children:"Segundos restantes V11 FINAL"}),(0,t.jsx)("p",{className:"text-sm text-blue-600 mt-2",children:"\uD83D\uDD25 \xa1Activa el sensor f\xedsico V11 FINAL para avanzar!"})]}),(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsx)("div",{className:"inline-block text-8xl cursor-pointer select-none hover:scale-110 transition-transform ".concat(p?"animate-bounce scale-110":""),onClick:"manual"===s.connectionMethod?ei:void 0,style:{filter:p?"drop-shadow(0 0 20px #3b82f6)":"none"},children:"\uD83D\uDEB4‍♂️"}),(0,t.jsx)("div",{className:"text-4xl ".concat(p?"animate-spin":""),children:"⚙️"}),"usb"===s.connectionMethod&&(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsx)(u,{onClick:ee,variant:"outline",size:"sm",children:"\uD83E\uDDEA Probar Sensor V11 FINAL"}),(0,t.jsx)(u,{onClick:ea,variant:"outline",size:"sm",children:"\uD83D\uDCCA Estado Sensor V11 FINAL"})]})]})]})})]}),"resultados"===e&&(()=>{let e=!s.isMultiplayer||s.distancia>s.distanciaRival,n=!!s.isMultiplayer&&1>Math.abs(s.distancia-s.distanciaRival);return(0,t.jsxs)("div",{className:"max-w-2xl mx-auto text-center space-y-8",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold text-gray-800",children:"\xa1Fin del Juego V11 FINAL!"}),(0,t.jsx)(x,{children:(0,t.jsxs)(h,{className:"p-8 space-y-6",children:[(0,t.jsx)("div",{className:"text-6xl mb-6",children:s.isMultiplayer?e?"\uD83C\uDFC6":n?"\uD83E\uDD1D":"\uD83E\uDD48":"\uD83C\uDFC1"}),(0,t.jsx)("h2",{className:"text-2xl font-semibold mb-6",children:s.isMultiplayer?e?"\xa1Ganaste V11 FINAL!":n?"\xa1Empate V11 FINAL!":"Perdiste V11 FINAL":"Tu rendimiento V11 FINAL:"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"text-3xl font-bold text-green-600 mb-2",children:[s.distanciaFinal," m"]}),(0,t.jsx)("p",{className:"text-gray-600",children:"Distancia Final V11 FINAL"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:[s.velocidadMedia," km/h"]}),(0,t.jsx)("p",{className:"text-gray-600",children:"Velocidad Media V11 FINAL"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-3xl font-bold text-purple-600 mb-2",children:s.clickCount}),(0,t.jsx)("p",{className:"text-gray-600",children:"usb"===s.connectionMethod?"Activaciones del Sensor V11 FINAL":"Clicks Manuales V11 FINAL"})]})]}),(0,t.jsxs)("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-800 mb-2",children:s.totalClicks}),(0,t.jsx)("p",{className:"text-blue-600",children:"Total de clicks V11 FINAL detectados en toda la sesi\xf3n"})]}),s.isMultiplayer&&(0,t.jsxs)("div",{className:"space-y-4 pt-4 border-t",children:[(0,t.jsx)("h3",{className:"text-xl font-semibold",children:"Resultado de la Competencia V11 FINAL"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)(g,{variant:"outline",className:"p-2",children:["T\xfa V11 FINAL: ",Math.round(s.distancia),"m"]}),(0,t.jsxs)(g,{variant:"outline",className:"p-2",children:["Rival V11 FINAL: ",Math.round(s.distanciaRival),"m"]})]})]}),(0,t.jsx)(u,{onClick:()=>{a("inicio"),r(e=>({...e,nodemcuDetectado:!1,gameActive:!1})),d||(o("\uD83D\uDE80 VERSI\xd3N 11 FINAL - Verificando compatibilidad..."),K())},className:"w-full",children:"\uD83C\uDFE0 Volver al Inicio V11 FINAL"})]})})]})})()]})})}D.displayName="AlertDescription"}},function(e){e.O(0,[552,971,117,744],function(){return e(e.s=9732)}),_N_E=e.O()}]);